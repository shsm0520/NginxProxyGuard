# ==========================================================================
# GeoIP2 Configuration for Nginx Proxy Guard
# Provides country and ASN information for access control and logging
# ==========================================================================
# This file is included when GeoIP databases are available
# If databases are not available, geoip-disabled.conf is used instead

# GeoIP2 Country Database
geoip2 /etc/nginx/geoip/GeoLite2-Country.mmdb {
    auto_reload 60m;
    $geoip2_metadata_country_build metadata build_epoch;
    $geoip2_country_code default=-- source=$remote_addr country iso_code;
    $geoip2_country_name default="Unknown" source=$remote_addr country names en;
    $geoip2_continent_code default=-- source=$remote_addr continent code;
}

# GeoIP2 ASN Database (for ISP/Organization info)
geoip2 /etc/nginx/geoip/GeoLite2-ASN.mmdb {
    auto_reload 60m;
    $geoip2_asn default=0 source=$remote_addr autonomous_system_number;
    $geoip2_org default="Unknown" source=$remote_addr autonomous_system_organization;
}
